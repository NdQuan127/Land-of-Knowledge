---
{"dg-publish":true,"permalink":"/encounters/external-application-ket-noi-firefox-voi-ung-dung-ngoai-de-mo-tai-video-playlist-bang-mpv-yt-dlp/"}
---


up:: [[Cards/Nh·∫≠p m√¥n Firefox\|Nh·∫≠p m√¥n Firefox]] 
tags:: #on/bt_chiase 

# External Application - K·∫øt n·ªëi Firefox v·ªõi ·ª©ng d·ª•ng ngo√†i ƒë·ªÉ m·ªü,t·∫£i video,playlist b·∫±ng MPV,yt-dlp
> C√°i n√†y ƒë·ªÉ setup th·ª±c ra kh√≥ v√£i l** n√™n anh em c·ªë g·∫Øng ƒë·ªçc k·ªπ ƒë·ª´ng b·ªè s√≥t ch·ªó n√†o üôÇ

**Video th√†nh qu·∫£:** https://app.screencast.com/YfChCkjCDfu2l
**[External Application](https://addons.mozilla.org/en-US/firefox/addon/external-application/)**: Addon gi√∫p k·∫øt n·ªëi Firefox v·ªõi c√°c ·ª©ng d·ª•ng b√™n ngo√†i, m·ªü r·ªông kh·∫£ nƒÉng c·ªßa Firefox ra th√†nh g·∫ßn nh∆∞ v√¥ h·∫°n, n√≥ c√≥ th·ªÉ l√†m ƒë∆∞·ª£c nh·ªØng ƒëi·ªÅu sau d·ª±a tr√™n th·ªùi gian th·ª≠ nghi·ªám ng·∫Øn ng·ªßi c·ªßa m√¨nh:  

- X·ªï video/playlist t·ª´ c√°c trang nh∆∞ Youtube, Dailymotion, Twitch, Nicovideo... ra th·∫≥ng MPV ƒë·ªÉ xem, tƒÉng t√≠nh tr·∫£i nghi·ªám: [Demo 1](https://streamable.com/7xioq7) | [Demo 2](https://streamable.com/sajctf)
- X·ªï livestream sang MPV xem b·ªè qua qu·∫£ng c√°o ho√†n to√†n
- G·ª≠i th·∫≥ng ·∫£nh t·ªõi ph·∫ßn m·ªÅm s·ª≠a ·∫£nh ƒë·ªÉ ch·ªânh s·ª≠a
- G·ª≠i file ƒë·∫øn Sandbox ƒë·ªÉ m·ªü lu√¥n trong Sandbox
- V√† r·∫•t r·∫•t nhi·ªÅu s·ª± k·∫øt h·ª£p kh√°c...
  
Kh·ªüi ƒë·∫ßu m√¨nh gi·ªõi thi·ªáu c√°ch ƒë·ªÉ k·∫øt n·ªëi Firefox v·ªõi MPV, m√† k·∫øt qu·∫£ l√† c√°c b·∫°n c√≥ th·ªÉ xem video/playlist/channel c·ªßa c√°c trang nh∆∞ Youtube/Dailimotion/Nicovideo... th·∫≥ng tr√™n MPV, b·ªè h·∫øt qu·∫£ng c√°o r√°c r∆∞·ªüi c≈©ng nh∆∞ hi·ªáu nƒÉng tuy·ªát ƒë·ªânh m√† tr√¨nh xem HTML5 c√πi b·∫Øp c·ªßa tr√¨nh duy·ªát web kh√¥ng bao gi·ªù so b√¨ l·∫°i.

> **N√™n ƒë·ªçc**: V√¨ c√°i n√†y set up kh√° ph·ª©c t·∫°p, n√™n n·∫øu anh em c√†i kh√°c m√¨nh nhi·ªÅu khi s·∫Ω kh√≥ l√†m theo h∆∞·ªõng d·∫´n, n√™n ƒë√¢y l√† c·∫•u tr√∫c chung, 1 c√°i s∆∞·ªùn ƒë·ªÉ anh em l√†m theo, *kh√¥ng c√≥ ƒëu√¥i file nghƒ©a l√† folder**, kh√¥ng b√¥i ƒëen l√† t√πy √Ω (c√≥ c≈©ng ƒë∆∞·ª£c kh√¥ng c√≥ c≈©ng ok ho·∫∑c c√≥ ch·ªâ ƒë·ªÉ m·ªü r·ªông t√≠nh nƒÉng)*:

Anh em n√™n ƒë·∫∑t MPV ·ªü ·ªï D - `D:mpv\`
‚îú‚îÄ‚îÄ‚îÄ**mpv.exe**  
‚îú‚îÄ‚îÄ‚îÄ**yt-dlp.exe**  
‚îú‚îÄ‚îÄ‚îÄ**yt-dlp.conf**  
‚îú‚îÄ‚îÄ‚îÄ**ffmpeg.exe**  
‚îú‚îÄ‚îÄ‚îÄstreamlink  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄbin  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄffmpeg  
‚îú‚îÄ‚îÄ‚îÄ**portable_config**  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ**mpv.conf**  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ**input.conf**  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ**scripts**  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄscript-opts  
‚îÇ ‚îú‚îÄ‚îÄ‚îÄshaders

**H∆∞·ªõng d·∫´n:**
- T·∫£i MPV v√† FFMPEG t·∫°i ƒë√¢y, gi·∫£i n√©n sao cho file mpv.exe n·∫±m c√πng th∆∞ m·ª•c v·ªõi file ffmpeg.exe: [https://github.com/zhongfly/mpv-winbuild/releases](https://github.com/zhongfly/mpv-winbuild/releases)
- (N·∫øu mu·ªën c√†i ƒë·∫∑t MPV th√†nh tr√¨nh xem phim m·∫∑c ƒë·ªãnh th√¨ ch·∫°y file install.bat sau ƒë√≥ v√†o Default Programs ch·ªânh MPV th√†nh m·∫∑c ƒë·ªãnh)
- (Tr·ª´ khi b·∫°n ch·∫Øc ch·∫Øn m√°y t√≠nh c·ªßa b·∫°n l√† ƒë·ªì m·ªõi s·∫£n xu·∫•t trong 1-2 nƒÉm ƒë·ªï l·∫°i ƒë√¢y, lu√¥n t·∫£i b·∫£n KH√îNG C√ì v3 cho l√†nh)
- T·∫£i yt-dlp.exe v√†o c√πng th∆∞ m·ª•c ch·ª©a mpv.exe: [https://github.com/yt-dlp/yt-dlp/releases](https://github.com/yt-dlp/yt-dlp/releases)
- C√†i ƒë·∫∑t addon External Application b√™n tr√™n.
- Click v√†o n√∫t addon c·ªßa External Application ƒë·ªÉ m·ªü ra trang t·∫°o k·∫øt n·ªëi ·ª©ng d·ª•ng, sau ƒë√≥ th√™m y x√¨ nh∆∞ n√†y:
    - Name: `MPV`
    - Executable: ƒê∆∞·ªùng d·∫´n t·ªõi file mpv.exe, v√≠ d·ª• c·ªßa m√¨nh l√† `D:\mpv\mpv.exe`
    - Arguments: `--ytdl [HREF]`
    - Ch·ªçn: `Toolbar button` v√† `Link context`
    - Save.
- Click v√†o n√∫t EA ·ªü toolbar, *m·ªôt c·ª≠a s·ªï hi·ªán ra nh∆∞ b√™n d∆∞·ªõi, l√†m theo h∆∞·ªõng d·∫´n t·∫£i file windows. Zip r·ªìi ch·∫°y install. Bat ƒë·ªÉ c√†i tr√¨nh k·∫øt n·ªëi Firefox v·ªõi ·ª©ng d·ª•ng b√™n ngo√†i c·ªßa h·ªá ƒëi·ªÅu h√†nh:*
![Pasted image 20230902230709.png](/img/user/Extras/Images/Pasted%20image%2020230902230709.png)
![Pasted image 20230902230727.png](/img/user/Extras/Images/Pasted%20image%2020230902230727.png)
![Pasted image 20230902230749.png](/img/user/Extras/Images/Pasted%20image%2020230902230749.png)
![Pasted image 20230902231336.png](/img/user/Extras/Images/Pasted%20image%2020230902231336.png)
*(T√≠ch ch·ªçn Link Context n·ªØa cho ti·ªán, sau n√†y m·ªü Youtube th·∫•y mu·ªën xem video n√†o th√¨ chu·ªôt ph·∫£i v√†o link video r·ªìi g·ª≠i th·∫≥ng qua MPV ƒë·ª° ph·∫£i m·ªü trang xem l√™n t·ªën th·ªùi gian)*

> C√≤n c√≥ c·∫£ sub lu√¥n cho anh em kh·ªèi ch√™ nh√©, n·∫øu mu·ªën c√≥ sub th√¨ l√†m nh∆∞ sau:

**C√°ch hi·ªán sub**
·ªû ph·∫ßn Arguments c·ªßa n√∫t MPV trong External Application th√¨ t·ªët nh·∫•t l√† n√™n ƒë·ªÉ l√† `--ytdl [HREF]` l√† ti·ªán nh·∫•t sau n√†y s·∫Ω d√πng `mpv.conf` ƒë·ªÉ ch·ªânh s·∫Ω ti·ªán h∆°n.  
  
Sau ƒë√≥ m·ªü `mpv.conf` l√™n, th√™m:
```javaScript
ytdl-raw-options-append=no-check-certificates=
ytdl-raw-options-append=sub-langs=en,en-US,eng,vi,vi-VN,vie,ja,ja-JP,jap
#ytdl-raw-options-append=sub-lang="en,en.*,vi"
ytdl-raw-options-append=write-auto-sub=
ytdl-raw-options-append=write-sub=
```
K·∫øt qu·∫£ ![: D]( https://statics.voz.tech/styles/next/xenforo/smilies/popo/biggrin.png?v=01 "Big grin    : D")
![Pasted image 20230902231908.png](/img/user/Extras/Images/Pasted%20image%2020230902231908.png)

## File `mpv.conf` kh√° ·ªïn ƒë·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng MPV t·ª´ con s·ªë 0
```javaScript
#Cach su dung: Xoa # o doan #abc=xyz o dau dong de kich hoat nhung doan config mau

###########
# General #
###########
# Custom config
#Bat len neu muon giong PiP cua trinh duyet, geometry=x50% nen chuyen thanh geometry=x25%
#ontop                                   # video player always on top
osd-on-seek=no
osd-font-size=24
#osd-duration=100
keep-open=yes
force-window=immediate
no-focus-on-open
geometry=x50%
load-unsafe-playlists=yes
user-agent='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/116.0'
force-seekable=yes
hr-seek=yes
hr-seek-framedrop=yes

#########
# uosc #
#########
# required so that the 2 UIs don't fight each other
#osc=no
# uosc provides its own seeking/volume indicators, so you also don't need this
#osd-bar=no
# uosc will draw its own window controls if you disable window border
#border=no

#########
# Video #
#########
hwdec=auto-safe

#Cho he may cui bap, CPU va GPU giam cuc nhieu
#tscale=nearest
#interpolation=no
#scale=bilinear
#cscale=bilinear
#dscale=bilinear
#sws-scaler=bilinear

#Cho he may khung, CPU va GPU tang doi lay video net hon
#vo=gpu-next #Neu may khoe, card man hinh doi moi, tra gia bang CPU/GPU cao cho hinh anh dep
#scale=ewa_lanczossharp
#cscale=ewa_lanczossharp

#########
# Audio #
#########
#audio-file-auto=fuzzy                   # play external audio files with same name as video files
#audio-pitch-correction=yes              # automatically insert scaletempo when playing with higher speed
volume-max=200                          # maximum volume in %, everything above 100 results in amplification
volume=100                              # default volume, 100 = unchanged

#########
#Subtitle
#########
#Doi mau, kich co subtitle
#sub-color='#FFFF00' #subtitle color in rgb
#sub-shadow-color='#000000' #shadow color
#sub-font='Noto Sans' #set font
#sub-bold=yes
#sub-font-size=60
#sub-pos=95 #subtitle position 5 percent above the bottom of the screen
#sub-fix-timing=yes

#########
# Cache #
#########
cache-pause
cache=yes
#cache-default=80000                     # size in KB (80MB) -- Increase if you have buffering issues
#cache-backbuffer=80000                  # size in KB
#cache-initial=0                         # start playback when your cache is filled up with x kB
cache-secs=600                           # how many seconds of audio/video to prefetch if the cache is active
demuxer-thread=yes
#demuxer-max-bytes=50MiB
demuxer-max-back-bytes=50MiB
demuxer-readahead-secs=600

#########
# Network #
#########
network-timeout=100
stream-lavf-o-append=reconnect_on_http_error=4xx,5xx
stream-lavf-o-append=reconnect_delay_max=30
stream-lavf-o-append=reconnect_streamed=yes
#stream-lavf-o-append=reconnect_on_network_error=yes

#########
# YTDL #
#########
ytdl-raw-options-append=no-check-certificates=
ytdl-raw-options-append=yes-playlist=
#ytdl-raw-options-append=extractor-args=youtube:player_skip=webpage,configs,js;player_client=android,web;lang=vi,en
#Chuyen sang Youtube VN may chu Youtube tra lai CDN gan Viet Nam, co the gay loi/thay doi ?
#ytdl-raw-options-append=extractor-args=youtube:lang=vi,en,ja
ytdl-raw-options-append=sub-langs=en,en-US,eng,vi,vi-VN,vie,ja,ja-JP,jap,live_chat
ytdl-raw-options-append=write-sub=
ytdl-raw-options-append=write-auto-sub=
ytdl-raw-options-append=mark-watched=
ytdl-raw-options-append=add-metadata=
#Danh dau da xem khong can plugin markwatched.lua https://voz.vn/t/tong-hop-nhung-addon-chat-cho-firefox-pc-mobile.682181/post-25727088
#ytdl-raw-options-append=cookies-from-browser=firefox:_ƒê∆Ø·ªúNG_D·∫™N_PROFILE_FIREFOX_V√ÄO_ABOUT:SUPPORT_OPEN_PROFILE_
#ytdl-raw-options-append=mark-watched=

#########
# Profile #
#########
#Chi tiet: https://voz.vn/t/tong-hop-nhung-addon-chat-cho-firefox-pc-mobile.682181/post-24149834
#Luon de phan nay o cuoi file mpv.conf
[quality-youtube]
profile-cond=path:match"youtube" ~= nil or filename:match"youtube" ~= nil or filename:match"/live$" ~= nil
profile-restore=copy
ytdl-format=bestvideo[container*=dash][proto*=http_dash_segments][height<=?720][fps<=?30][vcodec!=?vp9]+bestaudio/best[height<=720]

[quality-twitter]
profile-cond=path:match"twitter" ~= nil or filename:match"twitter" ~= nil or path:match"video.twimg" ~= nil or filename:match"video.twimg" ~= nil
profile-restore=copy
#ytdl-format=bestvideo[height<=?360]+bestaudio/best[height<=360]
#ytdl-format=bestvideo[proto*=hls]+bestaudio/best
ytdl-format=hls-197/hls-783/hls-475/hls-80
#ytdl-format=hls-783/hls-475/hls-197/hls-80
#hls-783/hls-475/hls-197/hls-80

[stream-no-ytdl]
profile-cond=string.find(path, '.m3u') ~= nil or string.find(path, '.mpd') ~= nil or string.find(path, '.mp4') ~= nil or string.find(path, 'googlevideo.') ~= nil or string.find(path, '.jpg') ~= nil or string.find(path, '.png') ~= nil
profile-restore=copy-equal
ytdl=no




#EOF
```

> T·ªëi ∆∞u hi·ªáu nƒÉng MPV th√¨ th√™m v√†o file `mpv.conf`:
```javaScript
###################
#Performance Tweaks#
###################
gpu-dumb-mode=yes
interpolation=no
scale=nearest #somehow fastest bilinear
cscale=nearest
dscale=nearest
tscale=nearest
sws-scaler=fast-bilinear
```

V·ªõi lavfast v√†o cu·ªëi file v√¨ lavfast c·∫£i thi·ªán hi·ªáu nƒÉng khi xem 720 H264 r·∫•t nhi·ªÅu l·∫ßn:
```javaScript
[lavcfast]
profile-cond=p["video-format"] == "h264" or p["video-format"] == "mpegvideo" or p["video-format"] == "mpegvideo1" or p["video-format"] == "mpegvideo2"
profile-restore=copy-equal
vd-lavc-fast=yes
```

## C√†i `uosc` cho MPV ƒë·ªÉ l·∫•y t√≠nh nƒÉng (chuy·ªÉn ch·∫•t l∆∞·ª£ng video, playlist, subtitle..
- T·∫°o folder portable_config trong c√πng m·ªôt th∆∞ m·ª•c v·ªõi mpv.exe n·∫øu ch∆∞a t·∫°o
- T·∫°o folder t√™n scripts v√† t√™n script-opts trong th∆∞ m·ª•c portable_config
- T·∫£i **uosc.zip** t·∫°i ƒë√¢y v√†o ƒë√∫ng folder portable_config: [https://github.com/tomasklaen/uosc/releases](https://github.com/tomasklaen/uosc/releases)
- Gi·∫£i n√©n Extract Here (sao cho folder scripts trong file n√©n ch√®n v√†o folder scripts trong th∆∞ m·ª•c portable_config v√† th∆∞ m·ª•c fonts n·∫±m chung v·ªõi th∆∞ m·ª•c scripts)
- (Kh√¥ng c·∫ßn thi·∫øt l·∫Øm) T·∫£i file config c·ªßa uosc t·∫°i ƒë√¢y v√†o folder script-opts: [https://raw.githubusercontent.com/tomasklaen/uosc/main/script-opts/uosc.conf](https://raw.githubusercontent.com/tomasklaen/uosc/main/script-opts/uosc.conf)
- (C·ª∞C K·ª≤ QUAN TR·ªåNG) T·∫°o m·ªôt file t√™n `mpv.conf` trong th∆∞ m·ª•c `portable_config` r·ªìi copy to√†n b·ªô ƒëo·∫°n d∆∞·ªõi n√†y v√†o r·ªìi Save:
```
#uosc
# required so that the 2 UIs don't fight each other
osc=no
# uosc provides its own seeking/volume indicators, so you also don't need this
osd-bar=no
# uosc will draw its own window controls if you disable window border
border=no
```

- *Gi·∫£m k√≠ch th∆∞·ªõc thanh timeline:* M·ªü `uosc.conf`, ch·ªânh `timeline_size_max_fullscreen=16`, `timeline_size_max=16`

